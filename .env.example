# 環境配置文件範例
# 複製此文件為 .env 並根據實際情況修改配置

# =============================================================================
# 基本配置
# =============================================================================

# 應用基本設置
APP_NAME="AI營銷內容生成系統"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT="production"

# 服務端口配置
API_PORT=8000
GRADIO_PORT=7860
CELERY_FLOWER_PORT=5555

# =============================================================================
# AI模型配置
# =============================================================================

# 模型存儲路徑
MODEL_CACHE_DIR="./checkpoints"
HF_CACHE_DIR="./hf_cache"

# Hugging Face配置
HUGGINGFACE_TOKEN=""  # 可選，用於下載受限模型
HF_HUB_OFFLINE=false

# GPU配置
CUDA_VISIBLE_DEVICES="0"
TORCH_CUDA_ALLOC_CONF="max_split_size_mb:512"

# 模型並行配置
USE_MODEL_PARALLEL=false
MODEL_PARALLEL_DEVICES="0,1"

# =============================================================================
# 數據庫配置
# =============================================================================

# PostgreSQL配置
POSTGRES_HOST="localhost"
POSTGRES_PORT=5432
POSTGRES_DB="ai_marketing"
POSTGRES_USER="ai_user"
POSTGRES_PASSWORD="your_secure_password_here"

# 數據庫連接池
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30

# 數據庫URL (自動生成，通常不需要修改)
DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}"

# =============================================================================
# Redis配置
# =============================================================================

# Redis基本配置
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=""  # 生產環境請設置密碼

# Redis連接池
REDIS_POOL_MAX_CONNECTIONS=50
REDIS_POOL_TIMEOUT=30

# Redis URL (自動生成)
REDIS_URL="redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}"

# =============================================================================
# Celery任務隊列配置
# =============================================================================

# Celery基本配置
CELERY_BROKER_URL="${REDIS_URL}"
CELERY_RESULT_BACKEND="${REDIS_URL}"

# Celery工作進程配置
CELERY_WORKER_CONCURRENCY=2
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_SERIALIZER="json"
CELERY_RESULT_SERIALIZER="json"

# 任務超時設置 (秒)
CELERY_TASK_SOFT_TIME_LIMIT=600
CELERY_TASK_TIME_LIMIT=900

# =============================================================================
# 文件存儲配置
# =============================================================================

# 本地存儲配置
UPLOAD_DIR="./uploads"
OUTPUT_DIR="./outputs"
MAX_UPLOAD_SIZE=100  # MB

# AWS S3配置 (可選)
USE_S3_STORAGE=false
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_S3_BUCKET_NAME=""
AWS_S3_REGION="us-east-1"

# =============================================================================
# 安全配置
# =============================================================================

# JWT認證配置
JWT_SECRET_KEY="your_jwt_secret_key_here"  # 請生成強密鑰
JWT_ALGORITHM="HS256"
JWT_EXPIRATION_HOURS=24

# API安全
API_RATE_LIMIT="100/hour"
CORS_ORIGINS="http://localhost:3000,http://localhost:7860"

# =============================================================================
# 生成參數配置
# =============================================================================

# 文案生成參數
TEXT_MAX_LENGTH=1000
TEXT_MIN_LENGTH=50
TEXT_TEMPERATURE=0.7
TEXT_TOP_P=0.9

# 圖像生成參數
IMAGE_MAX_WIDTH=1024
IMAGE_MAX_HEIGHT=1024
IMAGE_DEFAULT_STEPS=25
IMAGE_DEFAULT_GUIDANCE=7.5

# 影片生成參數
VIDEO_MAX_DURATION=10  # 秒
VIDEO_DEFAULT_FPS=24
VIDEO_MAX_RESOLUTION="1024x1024"

# =============================================================================
# 性能和限制配置
# =============================================================================

# 並發限制
MAX_CONCURRENT_TEXT_JOBS=5
MAX_CONCURRENT_IMAGE_JOBS=2
MAX_CONCURRENT_VIDEO_JOBS=1

# 緩存配置
ENABLE_RESULT_CACHE=true
CACHE_EXPIRATION=3600  # 秒

# 模型緩存
MODEL_CACHE_ENABLED=true
MODEL_CACHE_SIZE=4  # 同時緩存的模型數量

# =============================================================================
# 監控和日志配置
# =============================================================================

# 日志配置
LOG_LEVEL="INFO"
LOG_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
LOG_FILE="./logs/app.log"
LOG_MAX_SIZE=100  # MB
LOG_BACKUP_COUNT=5

# 監控配置
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30  # 秒

# =============================================================================
# 開發配置
# =============================================================================

# 開發模式設置 (僅開發環境)
DEV_MODE=false
RELOAD_ON_CHANGE=false
DEBUG_SQL=false

# 測試配置
TEST_DATABASE_URL="sqlite:///./test.db"
TEST_REDIS_URL="redis://localhost:6379/15"

# =============================================================================
# 第三方服務集成
# =============================================================================

# 郵件服務 (可選)
SMTP_SERVER=""
SMTP_PORT=587
SMTP_USERNAME=""
SMTP_PASSWORD=""
SMTP_USE_TLS=true

# 通知服務 (可選)
SLACK_WEBHOOK_URL=""
DISCORD_WEBHOOK_URL=""

# =============================================================================
# 特殊配置
# =============================================================================

# 實驗性功能
ENABLE_EXPERIMENTAL_FEATURES=false
USE_FLASH_ATTENTION=false
ENABLE_XFORMERS=true

# 模型特定配置
T5_MAX_LENGTH=512
SDXL_USE_REFINER=true
SVD_DECODE_CHUNK_SIZE=8

# 批量處理配置
BATCH_PROCESSING_ENABLED=true
MAX_BATCH_SIZE=4
BATCH_TIMEOUT=300  # 秒